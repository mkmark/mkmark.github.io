<!DOCTYPE html><html><head><meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-175297541-1"></script><title>KaTeX with VSCode, Jekyll, and WordPress Markdown</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="/content/css/styles.css?v=202102162213"><script src="/content/js/header.js?v=202102080708"></script><link rel="alternate" href="/atom.xml" title="Mark Ma's Blog" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Mark Ma's Blog" type="application/rss+xml"></head><body onclick=""><div class="sidebar" id="sidebar" onclick=""><div class="sidebar-item"><h1 style="margin-top:1.6em">Mark Ma&#39;s Blog</h1></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">About</a> <a class="sidebar-nav-item" href="/blog/">Blog</a> <a class="sidebar-nav-item" href="/archive/by-date/">　by Date</a> <a class="sidebar-nav-item" href="/archive/by-category/">　by Category</a> <a class="sidebar-nav-item" href="/archive/by-tag/">　by Tag</a> <a class="sidebar-nav-item" href="/portfolio/">Portfolio</a> <a class="sidebar-nav-item" href="/archive/by-tag/civil-engineering/">　Civil Engineering</a> <a class="sidebar-nav-item" href="/portfolio/graphic-design/">　Graphic Design</a> <a class="sidebar-nav-item" href="/portfolio/video-composition/">　Video Composition</a> <a class="sidebar-nav-item" href="/portfolio/web-design/">　Web Design</a><div class="sidebar-nav-item" onclick="switchColorMode()" style="cursor:pointer">Dark Mode</div></nav><div class="sidebar-item"><p><a href="/privacy-policy/" style="font-size:.85em">Privacy Policy</a></p><p>&copy; 2017-2022. All rights reserved.</p></div></div><div class="markdown-body"><article id="post-md/2020-12-26-katex-with-vscode,-jekyll,-and-wordpress-markdown" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">KaTeX with VSCode, Jekyll, and WordPress Markdown</h1></header><p class="post-meta"><time class="dt-published" datetime="2020-12-26T06:51:00+00:00" itemprop="datePublished">2020-12-26</time></p><div class="e-content article-entry" itemprop="articleBody"><p>I use KaTeX in VSCode extension <a target="_blank" rel="noopener" href="https://github.com/yzhang-gh/vscode-markdown" title="Markdown All in One">Markdown All in One</a> for notes and homework. It's by far the easiest and most flexible way.</p><p>Markdown is such a markup language (see the paradox? lol) without a widely-accepted, strong official organization regularizing its syntax and grammar. Typical standards includes:</p><ul><li><a target="_blank" rel="noopener" href="https://commonmark.org/" title="CommonMark">CommonMark</a></li><li><a target="_blank" rel="noopener" href="https://github.github.com/gfm/" title="Github Flavored Markdown">Github Flavored Markdown</a></li><li><a target="_blank" rel="noopener" href="https://michelf.ca/projects/php-markdown/extra/" title="Markdown Extra">Markdown Extra</a></li><li>...</li></ul><p>Implementation of Javascript libraries into Markdown, such as KaTeX, is done independently by Markdown processors, thus creating even more variants of syntax and grammar.</p><p>In an attempt to use the same syntax and grammar throughout my Markdown documents, i.e KaTeX with VSCode, Jekyll, and WordPress Markdown, and considering the possible transplantation to LaTeX, I adopt the following configuration for most consistent experience.</p><a id="more"></a><h2 id="VSCode">VSCode</h2><p>Markdown All in One, with default settings such that the following is adopted</p><pre class="language-markdown" data-language="markdown"><code class="language-markdown">inline equation $c$ and block equation is coded by

$$
E = mc^2
$$</code></pre><p>rendered as:</p><p>inline equation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">c</span></span></span></span> and block equation is coded by</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mo>=</mo><mi>m</mi><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E = mc^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.05764em">E</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8641079999999999em;vertical-align:0"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><p>other syntax like <code>\(\)</code> and <code>\[\]</code> are also supported.</p><h2 id="Jekyll">Jekyll</h2><p>Two methods, server-side and client-side, are experimented. Client-side method is preferred due to flexibility on custom delimiter syntax.</p><h3 id="Server-side-Method">Server-side Method</h3><p>Server-side gem</p><pre class="language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># KaTeX</span>
gem <span class="token string">'katex'</span><span class="token punctuation">,</span> <span class="token string">'~> 0.6.0'</span>
gem <span class="token string">"kramdown-math-katex"</span></code></pre><p>config.yml</p><pre class="language-yml" data-language="yml"><code class="language-yml"># Build settings
markdown: kramdown
kramdown:
  math_engine: katex
  math_engine_opts: &#123;&#125;</code></pre><p>To support inline syntax <code>$</code>, do the following change in <code>~/gems/gems/kramdown-2.3.0/lib/kramdown/parser/kramdown/math.rb</code></p><pre class="language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment">#INLINE_MATH_START = /\$\$(.*?)\$\$/m</span>
<span class="token constant">INLINE_MATH_START</span> <span class="token operator">=</span> <span class="token regex">/\$(.*?[\S])\$/m</span></code></pre><p>Off topic, the footnote regex need to modify as well, in <code>~/gems/gems/kramdown-2.3.0/lib/kramdown/parser/kramdown/footnote.rb</code></p><pre class="language-ruby" data-language="ruby"><code class="language-ruby"><span class="token constant">ALD_FN_NAME</span> <span class="token operator">=</span> <span class="token regex">/[^\[]*/</span>
<span class="token constant">FOOTNOTE_DEFINITION_START</span> <span class="token operator">=</span> <span class="token regex">/^#&#123;OPT_SPACE&#125;\[\^(#&#123;ALD_FN_NAME&#125;)\]:\s*?(.*?\n#&#123;CODEBLOCK_MATCH&#125;)/</span>
<span class="token constant">FOOTNOTE_MARKER_START</span> <span class="token operator">=</span> <span class="token regex">/\[\^(#&#123;ALD_FN_NAME&#125;)\]/</span></code></pre><h3 id="Client-side-Method">Client-side Method</h3><p>No gem required.</p><p>config.yml</p><pre class="language-yml" data-language="yml"><code class="language-yml"># Build settings
markdown: kramdown
kramdown:
  math_engine: null</code></pre><p>such that default <code>math_engine: mathjax</code> is not enabled.</p><p>HTML template header</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>HTML template footer</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// Load KaTeX</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token function">renderMathInElement</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    delimiters<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"$$"</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"$$"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"$"</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"$"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"\("</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"\)"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"\["</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"\]"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>thus defined all 4 delimiters. Note that this method is potentially dangerous since delimiters are used instead of regex.</p><h2 id="WordPress">WordPress</h2><p>I use <a target="_blank" rel="noopener" href="https://github.com/terrylinooo/githuber-md" title="Githuber MD">Githuber MD</a> as my preferred github editor. I've tried <a target="_blank" rel="noopener" href="https://github.com/LuRenJiasWorld/">WP-Editor.md</a> but that one gots too many bugs even after years of development.</p><p>A quick and dirty hack to get my delimiters work:</p><p>replacing original inline style with display style,</p><p>wp-githuber-md/src/Modules/KaTeX.php</p><pre class="language-php" data-language="php"><code class="language-php"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">katex_inline_markup</span><span class="token punctuation">(</span> <span class="token variable">$content</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">//replace original incline style with display style</span>
	<span class="token comment">//$regex = '%&lt;code>\$\$((?:[^$]+ |(?&lt;=(?&lt;!\\\\)\\\\)\$ )+)(?&lt;!\\\\)\$\$&lt;\/code>%ix';</span>
	<span class="token variable">$regex</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'%(\$\$)((?:[^$]+ |(?&lt;=(?&lt;!\\\\)\\\\)\$ )+)(?&lt;!\\\\)(\$\$)%ix'</span><span class="token punctuation">;</span>
	<span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">preg_replace_callback</span><span class="token punctuation">(</span> <span class="token variable">$regex</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token variable">$matches</span> <span class="token operator">=</span> <span class="token function">func_get_arg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token keyword">empty</span><span class="token punctuation">(</span> <span class="token variable">$matches</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token variable">$katex</span> <span class="token operator">=</span> <span class="token variable">$matches</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token variable">$katex</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span> <span class="token keyword">array</span><span class="token punctuation">(</span> <span class="token string single-quoted-string">'&lt;'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'>'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'"'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">''</span><span class="token string single-quoted-string">', '</span><span class="token operator">&amp;</span><span class="token string single-quoted-string">', '</span><span class="token operator">&amp;</span><span class="token string single-quoted-string">', "\n", "\r" ), array( '</span><span class="token operator">&lt;</span><span class="token string single-quoted-string">', '</span><span class="token operator">></span><span class="token string single-quoted-string">', '</span><span class="token string double-quoted-string">"', "</span><span class="token string single-quoted-string">'", '</span><span class="token operator">&amp;</span><span class="token string single-quoted-string">', '</span><span class="token operator">&amp;</span><span class="token string single-quoted-string">', '</span> <span class="token string single-quoted-string">', '</span> <span class="token string single-quoted-string">' ), $katex );
			//solve escape problem, temporarily 
			$katex = str_replace( '</span>\\<span class="token string single-quoted-string">', '</span>\\\\<span class="token string single-quoted-string">', $katex );
			$katex = str_replace( '</span><span class="token constant">_</span><span class="token string single-quoted-string">', '</span>\<span class="token constant">_</span><span class="token string single-quoted-string">', $katex );
			//return '</span><span class="token operator">&lt;</span>code <span class="token keyword">class</span><span class="token operator">=</span><span class="token string double-quoted-string">"katex-inline"</span><span class="token operator">></span><span class="token string single-quoted-string">' . trim( $katex ) . '</span><span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">></span>'<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token variable">$katex</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token variable">$content</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token variable">$content</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre><p>Reorder the rendering steps to have KaTeX rendered before Markdown.</p><p>wp-githuber-md/src/Controllers/Markdown.php</p><pre class="language-php" data-language="php"><code class="language-php"><span class="token comment">// If we're not using the code shortcode, prevent over-encoding.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$args</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'decode_code_blocks'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">restore_code_blocks</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Reordered Render KaTeX inline markup.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">is_support_katex</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token class-name static-context">ModuleKaTeX</span><span class="token operator">::</span><span class="token function">katex_inline_markup</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Transform it!</span>
<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">get_parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">transform</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Fetch remote images.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">is_convert_remote_image</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token function">convert_remote_image</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Render Github Flavored Markdown task lists if this module is enabled.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">is_support_task_list</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token class-name static-context">ModuleTaskList</span><span class="token operator">::</span><span class="token function">parse_gfm_task_list</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Render KaTeX inline markup.</span>
<span class="token comment">// if ( $this->is_support_katex ) &#123;</span>
<span class="token comment">//	  $text = ModuleKaTeX::katex_inline_markup( $text );</span>
<span class="token comment">//&#125;</span>

<span class="token comment">// Render MathJax inline markup.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">is_support_mathjax</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token class-name static-context">ModuleMathJax</span><span class="token operator">::</span><span class="token function">mathjax_inline_markup</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Markdown inserts extra spaces to make itself work. Buh-bye.</span>
<span class="token variable">$text</span> <span class="token operator">=</span> <span class="token function">rtrim</span><span class="token punctuation">(</span> <span class="token variable">$text</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>then add same code to header and footer as Jekyll client method</p><p>HTML template header</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>HTML template footer</p><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// Load KaTeX</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token function">renderMathInElement</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    delimiters<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"$$"</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"$$"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"$"</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"$"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"\("</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"\)"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span> left<span class="token operator">:</span> <span class="token string">"\["</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token string">"\]"</span><span class="token punctuation">,</span> display<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>and we are all set.</p><h2 id="Reference">Reference</h2><p><a target="_blank" rel="noopener" href="https://github.com/kramdown/math-katex" title="kramdown/math-katex: kramdown-math-katex uses KaTeX to convert math elements to HTML on the server side">kramdown/math-katex: kramdown-math-katex uses KaTeX to convert math elements to HTML on the server side</a></p><p><a target="_blank" rel="noopener" href="https://katex.org/docs/autorender.html" title="Auto-render Extension · KaTeX">Auto-render Extension · KaTeX</a></p></div></div></article></div><div id="privacy-notice"><div id="privacy-notice-content" class="markdown-body"><div><a id="privacy-notice-dismiss" class="btn"><svg width="18" height="18" viewBox="0 0 18 18" style="fill:currentColor;vertical-align:baseline;margin-top:-.3em;margin-bottom:-.3em"><path d="M15 4.41L13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"/></svg></a></div><div>Hover your mouse or tap on the left edge to navigate.<br>Upon dismissing, you acknowledge that you have read and understand our <a href="/privacy-policy/">Privacy Policy</a>.</div></div></div></body><footer><script src="/content/js/footer.js?v=202102080708"></script></footer></html>