<!DOCTYPE html><html><head><meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-175297541-1"></script><title>Compact Archives compact.php modify</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="/content/css/styles.css?v=202102162213"><script src="/content/js/header.js?v=202102080708"></script><link rel="alternate" href="/atom.xml" title="Mark Ma's Blog" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Mark Ma's Blog" type="application/rss+xml"></head><body onclick=""><div class="sidebar" id="sidebar" onclick=""><div class="sidebar-item"><h1 style="margin-top:1.6em">Mark Ma&#39;s Blog</h1></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">About</a> <a class="sidebar-nav-item" href="/blog/">Blog</a> <a class="sidebar-nav-item" href="/archive/by-date/">- by Date</a> <a class="sidebar-nav-item" href="/archive/by-category/">- by Category</a> <a class="sidebar-nav-item" href="/archive/by-tag/">- by Tag</a> <a class="sidebar-nav-item" href="/portfolio/">Portfolio</a> <a class="sidebar-nav-item" href="/portfolio/graphic-design/">- Graphic Design</a> <a class="sidebar-nav-item" href="/portfolio/video-composition/">- Video Composition</a> <a class="sidebar-nav-item" href="/portfolio/web-design/">- Web Design</a><div class="sidebar-nav-item" onclick="switchColorMode()" style="cursor:pointer">Dark Mode</div></nav><div class="sidebar-item"><p><a href="/privacy-policy/" style="font-size:.85em">Privacy Policy</a></p><p>&copy; 2017-2021. All rights reserved.</p></div></div><div class="markdown-body"><article id="post-md/2018-04-11-compact-archives-compact.php-modify" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">Compact Archives compact.php modify</h1></header><p class="post-meta"><time class="dt-published" datetime="2018-04-11T14:43:00+08:00" itemprop="datePublished">2018-04-11</time></p><div class="e-content article-entry" itemprop="articleBody"><p>In order to display the compact archives as a table, I modified part of the compact.php as below, pay attention to the <code>li</code> part.</p><pre class="language-php" data-language="php"><code class="language-php"><span class="token keyword">foreach</span> <span class="token punctuation">(</span> <span class="token variable">$dates</span> <span class="token keyword">as</span> <span class="token variable">$year</span> <span class="token operator">=></span> <span class="token variable">$months</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">$result</span> <span class="token operator">.=</span> <span class="token variable">$before</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'&lt;li class="theyear">&lt;a href="'</span> <span class="token operator">.</span> <span class="token function">get_year_link</span><span class="token punctuation">(</span> <span class="token variable">$year</span> <span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'">'</span> <span class="token operator">.</span> <span class="token variable">$year</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'&lt;/a>&lt;/li>'</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token variable">$month</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token variable">$month</span> <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span> <span class="token variable">$month</span> <span class="token operator">+=</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token variable">$month_has_posts</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">isset</span><span class="token punctuation">(</span> <span class="token variable">$months</span><span class="token punctuation">[</span><span class="token variable">$month</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$dummydate</span> <span class="token operator">=</span> <span class="token function">strtotime</span><span class="token punctuation">(</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$month</span></span>/01/2001"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// get the month name; strftime() localizes</span>
        <span class="token variable">$month_name</span> <span class="token operator">=</span> <span class="token function">strftime</span><span class="token punctuation">(</span> <span class="token string double-quoted-string">"%B"</span><span class="token punctuation">,</span> <span class="token variable">$dummydate</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span> <span class="token variable">$style</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'initial'</span><span class="token punctuation">:</span>
            <span class="token variable">$month_abbrev</span> <span class="token operator">=</span> <span class="token variable">$month_name</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// the inital of the month</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'block'</span><span class="token punctuation">:</span>
            <span class="token variable">$month_abbrev</span> <span class="token operator">=</span> <span class="token function">strftime</span><span class="token punctuation">(</span> <span class="token string double-quoted-string">"%b"</span><span class="token punctuation">,</span> <span class="token variable">$dummydate</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get the short month name; strftime() localizes</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'numeric'</span><span class="token punctuation">:</span>
            <span class="token variable">$month_abbrev</span> <span class="token operator">=</span> <span class="token function">strftime</span><span class="token punctuation">(</span> <span class="token string double-quoted-string">"%m"</span><span class="token punctuation">,</span> <span class="token variable">$dummydate</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get the month number, e.g., '04'</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token variable">$month_abbrev</span> <span class="token operator">=</span> <span class="token variable">$month_name</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// the inital of the month</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$month_has_posts</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token variable">$result</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">'&lt;li>&lt;a class="amonth" href="'</span> <span class="token operator">.</span> <span class="token function">get_month_link</span><span class="token punctuation">(</span> <span class="token variable">$year</span><span class="token punctuation">,</span> <span class="token variable">$month</span> <span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'" title="'</span> <span class="token operator">.</span> <span class="token variable">$month_name</span> <span class="token operator">.</span> <span class="token string single-quoted-string">' '</span> <span class="token operator">.</span> <span class="token variable">$year</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'">'</span> <span class="token operator">.</span> <span class="token variable">$month_abbrev</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'&lt;/a>&lt;/li> '</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token variable">$result</span> <span class="token operator">.=</span> <span class="token string single-quoted-string">'&lt;li>&lt;span class="emptymonth">'</span> <span class="token operator">.</span> <span class="token variable">$month_abbrev</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'&lt;/span>&lt;/li> '</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token variable">$result</span> <span class="token operator">.=</span> <span class="token variable">$after</span><span class="token operator">.</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre></div></div></article></div><div id="privacy-notice"><div id="privacy-notice-content" class="markdown-body"><div><a id="privacy-notice-dismiss" class="btn"><svg width="18" height="18" viewBox="0 0 18 18" style="fill:currentColor;vertical-align:baseline;margin-top:-.3em;margin-bottom:-.3em"><path d="M15 4.41L13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"/></svg></a></div><div>Hover your mouse or tap on the left edge to navigate.<br>Upon dismissing, you acknowledge that you have read and understand our <a href="/privacy-policy/">Privacy Policy</a>.</div></div></div></body><footer><script src="/content/js/footer.js?v=202102080708"></script></footer></html>