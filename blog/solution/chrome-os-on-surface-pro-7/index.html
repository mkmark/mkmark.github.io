<!DOCTYPE html><html><head><meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-175297541-1"></script><title>Chrome OS on Surface Pro 7</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="/content/css/styles.css?v=202102150856"><script src="/content/js/header.js?v=202102080708"></script><link rel="alternate" href="/atom.xml" title="Mark Ma's Blog" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Mark Ma's Blog" type="application/rss+xml"></head><body onclick=""><div class="sidebar" id="sidebar" onclick=""><div class="sidebar-item"><h1 style="margin-top:1.6em">Mark Ma&#39;s Blog</h1></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">About</a> <a class="sidebar-nav-item" href="/blog/">Blog</a> <a class="sidebar-nav-item" href="/archive/by-date/">- by Date</a> <a class="sidebar-nav-item" href="/archive/by-category/">- by Category</a> <a class="sidebar-nav-item" href="/archive/by-tag/">- by Tag</a> <a class="sidebar-nav-item" href="/portfolio/">Portfolio</a> <a class="sidebar-nav-item" href="/portfolio/graphic-design/">- Graphic Design</a> <a class="sidebar-nav-item" href="/portfolio/video-composition/">- Video Composition</a> <a class="sidebar-nav-item" href="/portfolio/web-design/">- Web Design</a><div class="sidebar-nav-item" onclick="switchColorMode()" style="cursor:pointer">Dark Mode</div></nav><div class="sidebar-item"><p><a href="/privacy-policy/" style="color:#888;font-size:.85em">Privacy Policy</a></p><p>&copy; 2017-2021. All rights reserved.</p></div></div><div class="markdown-body"><article id="post-md/2021-01-14-chrome-os-on-surface-pro-7" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">Chrome OS on Surface Pro 7</h1></header><p class="post-meta"><time class="dt-published" datetime="2021-01-14T06:52:00+08:00" itemprop="datePublished">2021-01-14</time></p><div class="e-content article-entry" itemprop="articleBody"><h2 id="20210113">20210113</h2><h3 id="Working">Working</h3><p>except # Not Working</p><h3 id="Not-Woking">Not Woking</h3><ul><li>Multitouch Finger Input (Singletouch works)</li><li>Stylus Input</li><li>Camera</li><li>Surprise, dark mode hasn't been implemented in Chrome OS 87!</li></ul><h3 id="Have-Problem-Working">Have Problem Working</h3><p>Speaker will make hissing noises with headphone injected</p><h3 id="Mechanism">Mechanism</h3><p>Chrome OS cannot be installed directly to PC due to hardware compatibility. Some hardware, e.g. the Intel Precise Touch Screen of Surface Pro, even requires special driver. Moreover, Chrome OS, or Android, are built to install on the entire disk (not a partition).</p><p>'brunch' is a framework project featuring these problems by including support for PC hardwares and installing Chrome OS on a .img disk mirror file.</p><h3 id="Repo">Repo</h3><p><a target="_blank" rel="noopener" href="https://github.com/sebanc/brunch" title="sebanc/brunch: Boot ChromeOS on x86_64 PC (supports most Intel CPU/GPU or AMD Stoney Ridge)">sebanc/brunch: Boot ChromeOS on x86_64 PC (supports most Intel CPU/GPU or AMD Stoney Ridge)</a></p><p>Rammus recovery bin from <a target="_blank" rel="noopener" href="https://cros-updates-serving.appspot.com/" title="CrOS Updates Serving">CrOS Updates Serving</a></p><h4 id="Bottle-neck-upstream-repo">Bottle neck upstream repo</h4><p><a target="_blank" rel="noopener" href="https://github.com/linux-surface/iptsd" title="linux-surface/iptsd: Userspace daemon for Intel Precise Touch &amp; Stylus">linux-surface/iptsd: Userspace daemon for Intel Precise Touch &amp; Stylus</a></p><h3 id="Install-script">Install script</h3><p>I use WSL to pack up the '.img' file. Due to the warning given by brunch readme, I made a special partition, a 32 GB NTFS 'G:', i.e. '/mnt/g/' in wsl for safety concern. The img size is thus set at 31 (GB).</p><p>The reason to use NTFS is to facilitate disk operation in Windows. An EXT4 file system will work too, but not FAT32 due to lack of support of large file.</p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">pv</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> cgpt
<span class="token function">sudo</span> <span class="token function">bash</span> chromeos-install.sh -src chromeos_13505.73.0_rammus_recovery_stable-channel_mp-v2.bin -dst /mnt/g/chromeos.img -s <span class="token number">31</span><span class="token punctuation">;</span></code></pre><h3 id="GRUB2">GRUB2</h3><p>Need to disable Secure Boot and Bitlocker first.</p><p>Turning Secure Boot back on is an easy method to disable GRUB - thus booting directly into Windows.</p><p>I use grub2win for multi-boot. Add the boot code generated by brunch (next to the generated '.img' file) to <code>grub.cfg</code> to add the Chrome OS boot entry, and specify <code>options=ipts</code> in kernel parameters to enable touchscreen input.</p><h3 id="Update">Update</h3><p>Follow instructions of <a target="_blank" rel="noopener" href="https://github.com/BiteDasher/brcr-update" title="BiteDasher/brcr-update: Script to update Chrome OS installed using the brunch framework">BiteDasher/brcr-update: Script to update Chrome OS installed using the brunch framework</a></p></div></div></article></div><div id="privacy-notice"><div id="privacy-notice-content" class="markdown-body"><div><a id="privacy-notice-dismiss" class="btn"><svg width="18" height="18" viewBox="0 0 18 18" style="fill:currentColor;vertical-align:baseline;margin-top:-.3em;margin-bottom:-.3em"><path d="M15 4.41L13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"/></svg></a></div><div>Hover your mouse or tap on the left edge to navigate.<br>Upon dismissing, you acknowledge that you have read and understand our <a href="/privacy-policy/">Privacy Policy</a>.</div></div></div></body><footer><script src="/content/js/footer.js?v=202102080708"></script></footer></html>