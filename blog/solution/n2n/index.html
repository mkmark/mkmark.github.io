<!DOCTYPE html><html><head><meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-175297541-1"></script><title>n2n</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="/content/css/styles.css?v=202102162213"><script src="/content/js/header.js?v=202102080708"></script><link rel="alternate" href="/atom.xml" title="Mark Ma's Blog" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Mark Ma's Blog" type="application/rss+xml"></head><body onclick=""><div class="sidebar" id="sidebar" onclick=""><div class="sidebar-item"><h1 style="margin-top:1.6em">Mark Ma&#39;s Blog</h1></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">About</a> <a class="sidebar-nav-item" href="/blog/">Blog</a> <a class="sidebar-nav-item" href="/archive/by-date/">- by Date</a> <a class="sidebar-nav-item" href="/archive/by-category/">- by Category</a> <a class="sidebar-nav-item" href="/archive/by-tag/">- by Tag</a> <a class="sidebar-nav-item" href="/portfolio/">Portfolio</a> <a class="sidebar-nav-item" href="/archive/by-tag/civil-engineering/">- Civil Engineering</a> <a class="sidebar-nav-item" href="/portfolio/graphic-design/">- Graphic Design</a> <a class="sidebar-nav-item" href="/portfolio/video-composition/">- Video Composition</a> <a class="sidebar-nav-item" href="/portfolio/web-design/">- Web Design</a><div class="sidebar-nav-item" onclick="switchColorMode()" style="cursor:pointer">Dark Mode</div></nav><div class="sidebar-item"><p><a href="/privacy-policy/" style="font-size:.85em">Privacy Policy</a></p><p>&copy; 2017-2021. All rights reserved.</p></div></div><div class="markdown-body"><article id="post-md/2019-10-25-n2n" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">n2n</h1></header><p class="post-meta"><time class="dt-published" datetime="2019-10-25T01:28:00+08:00" itemprop="datePublished">2019-10-25</time></p><div class="e-content article-entry" itemprop="articleBody"><p>n2n is a solution for Virtual LAN.</p><p>With VLAN many things can be quite easy, e.g. SMB sharing across NAT.</p><a id="more"></a><h4 id="Super-Node-Bash">Super Node Bash</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /etc/yum.repos.d/
<span class="token function">wget</span> http://packages.ntop.org/centos/ntop.repo -O ntop.repo
<span class="token function">rpm</span> -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
yum <span class="token function">install</span> pfring-dkms n2disk nprobe ntopng cento</code></pre><h4 id="Edit-Super-Node">Edit Super Node</h4><p>/etc/n2n supernode.conf</p><pre class="language-none"><code class="language-none">-l&#x3D;[Port]</code></pre><p>/etc/n2n supernodes.list</p><pre class="language-none"><code class="language-none">[networkName][Port]</code></pre><h4 id="Super-Node-Bash-2">Super Node Bash</h4><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> supernode
<span class="token function">sudo</span> systemctl start supernode</code></pre><h4 id="Edge-Node-Install">Edge Node Install</h4><p>run tap-windows.exe from OpenVPN.exe$TEMP</p><p>edge.exe</p><h4 id="Edge-Node">Edge Node</h4><pre class="language-bash" data-language="bash"><code class="language-bash">.<span class="token punctuation">\</span>edge -c <span class="token punctuation">[</span>networkName<span class="token punctuation">]</span> -k <span class="token punctuation">[</span>passcode<span class="token punctuation">]</span> -a <span class="token punctuation">[</span>ipv4<span class="token punctuation">]</span> -f -l <span class="token punctuation">[</span>SuperNodeAddress<span class="token punctuation">]</span>:<span class="token punctuation">[</span>Port<span class="token punctuation">]</span></code></pre><p>Firewall-create rules-custom</p><p>Allow all Inbound/Outbound connection from local ip address [ipv4]</p><h4 id="Optional">Optional</h4><pre class="language-bash" data-language="bash"><code class="language-bash">Get-NetConnectionProfile
Set-NetConnectionProfile -InterfaceIndex <span class="token punctuation">[</span>Index<span class="token punctuation">]</span> -NetworkCategory Private</code></pre><h4 id="Hidden-Auto-Start">Hidden Auto Start</h4><p>Create n2n.bat file</p><pre class="language-bat" data-language="bat"><code class="language-bat">&quot;[edge.exe Path]&quot;  -c [networkName] -k [passcode] -a [ipv4] -f -l [SuperNodeAddress]:[Port]</code></pre><p>Create n2n.vbs file</p><pre class="language-vbs" data-language="vbs"><code class="language-vbs">createobject(&quot;wscript.shell&quot;).run &quot;[n2n.bat Path]&quot;,0</code></pre><p>Create Task Scheduler task, Run with highest privilleges, At log on</p><h4 id="Reference">Reference</h4><p><a href="https://github.com/ntop/n2n" target="_blank" rel="noopener noreferrer">https://github.com/ntop/n2n</a><br><a href="http://packages.ntop.org/" target="_blank" rel="noopener noreferrer">http://packages.ntop.org/</a><br><a href="http://www.lucktu.com/archives/767.html" target="_blank" rel="noopener noreferrer">http://www.lucktu.com/archives/767.html</a></p><h4 id="Resources">Resources</h4><p>edge.exe</p><p><a href="https://github.com/lucktu/n2n/tree/master/windows/x64/v2/dev" target="_blank" rel="noopener noreferrer">https://github.com/lucktu/n2n/tree/master/windows/x64/v2/dev</a></p><p>openvpn.exe</p><p><a href="https://openvpn.net/community-downloads/" target="_blank" rel="noopener noreferrer">https://openvpn.net/community-downloads/</a></p><p>Android</p><p><a href="https://github.com/switch-iot/hin2n/releases/tag/hin2n_v0.6.0-rc2" rel="noopener noreferrer" target="_blank">https://github.com/switch-iot/hin2n/releases/tag/hin2n_v0.6.0-rc2</a></p></div></div></article></div><div id="privacy-notice"><div id="privacy-notice-content" class="markdown-body"><div><a id="privacy-notice-dismiss" class="btn"><svg width="18" height="18" viewBox="0 0 18 18" style="fill:currentColor;vertical-align:baseline;margin-top:-.3em;margin-bottom:-.3em"><path d="M15 4.41L13.59 3 9 7.59 4.41 3 3 4.41 7.59 9 3 13.59 4.41 15 9 10.41 13.59 15 15 13.59 10.41 9 15 4.41z"/></svg></a></div><div>Hover your mouse or tap on the left edge to navigate.<br>Upon dismissing, you acknowledge that you have read and understand our <a href="/privacy-policy/">Privacy Policy</a>.</div></div></div></body><footer><script src="/content/js/footer.js?v=202102080708"></script></footer></html>